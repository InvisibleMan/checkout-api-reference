/entities:
  parameters:
    - $ref: '#/components/parameters/Cko-Version'
    - $ref: '#/components/parameters/Cko-Request-Id'
  post:
    description: |
      Create a sub-entity, so that 2 operations can occur:
        1. Checkout.com can conduct VMSS checks on them
        2. Processing capabilities will be enabled, in the shape of processing channels (signing up the sub-entity with a 3DS setup)
    summary: Onboard a sub-entity onto Checkout.com's payment platform
    requestBody:
      required: true
      description: The sub-entity to be onboarded.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/EntityCreateRequest'
    responses:
      '201':
        description: Created Response
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EntityBasicResponse'
        headers:
          Cko-Version:
            $ref: '#/components/parameters/Cko-Version'
          Cko-Request-Id:
            $ref: '#/components/parameters/Cko-Request-Id'
      '400':
        description: Bad Request
        content:
        application/json:
          schema:
            allOf:
              - $ref: "#/components/schemas/ValidationError"
              - example:
                  request_id: "215e771b-d43a-4b33-a2bf-196fdf0523fa"
                  error_type: "request_invalid"
                  error_codes:
                    - legal_name_missing
      '401':
        description: Unauthorised - Bearer token is invalid or missing
        headers:
          WWW_Authenticate:
            schema:
              type: string
    tags:
      - Marketplace
    
